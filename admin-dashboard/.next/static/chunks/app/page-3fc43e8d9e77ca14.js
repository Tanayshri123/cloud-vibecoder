(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9036:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(2898).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},1915:function(e,t,s){Promise.resolve().then(s.bind(s,656))},656:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return U}});var r=s(7437),a=s(2265),n=s(5922),i=s(9036),l=s(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,l.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),o=(0,l.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),d=(0,l.Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var u=s(5754),m=s(1657);let f=a.forwardRef((e,t)=>{let{className:s,type:a,...n}=e;return(0,r.jsx)("input",{type:a,className:(0,m.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});f.displayName="Input";var h=s(7815);function x(e){let{onLogin:t}=e,[s,l]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null),[g,p]=(0,a.useState)(!1),[b,y]=(0,a.useState)(""),[j,v]=(0,a.useState)(""),[N,w]=(0,a.useState)(""),_=async e=>{e.preventDefault(),l(!0),x(null);try{await n.auth.signIn(b,j),t()}catch(e){x(e instanceof Error?e.message:"Login failed")}finally{l(!1)}},k=async e=>{if(e.preventDefault(),l(!0),x(null),!N||"67"!==N){x("Invalid admin secret key"),l(!1);return}try{await n.auth.signUp(b,j),t()}catch(e){x(e instanceof Error?e.message:"Sign up failed")}finally{l(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/20 to-primary/5 p-4",children:(0,r.jsxs)(h.Zb,{className:"w-full max-w-md",children:[(0,r.jsxs)(h.Ol,{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(i.Z,{className:"w-8 h-8 text-primary"})}),(0,r.jsx)(h.ll,{className:"text-2xl",children:g?"Create Admin Account":"Admin Login"}),(0,r.jsx)(h.SZ,{children:"Cloud Vibecoder Dashboard"})]}),(0,r.jsxs)(h.aY,{children:[m&&(0,r.jsxs)("div",{className:"mb-6 p-4 bg-destructive/10 border border-destructive/20 rounded-lg flex items-start",children:[(0,r.jsx)(c,{className:"w-5 h-5 text-destructive mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsx)("p",{className:"text-destructive text-sm",children:m})]}),(0,r.jsxs)("form",{onSubmit:g?k:_,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Email"}),(0,r.jsx)(f,{type:"email",value:b,onChange:e=>y(e.target.value),placeholder:"admin@example.com",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Password"}),(0,r.jsx)(f,{type:"password",value:j,onChange:e=>v(e.target.value),placeholder:g?"Create a password (min 6 chars)":"Enter your password",minLength:6,required:!0})]}),g&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Admin Secret Key"}),(0,r.jsx)(f,{type:"password",value:N,onChange:e=>w(e.target.value),placeholder:"Enter admin secret key",required:!0})]}),(0,r.jsx)(u.z,{type:"submit",className:"w-full",disabled:s,children:s?(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,r.jsxs)(r.Fragment,{children:[g?(0,r.jsx)(o,{className:"w-5 h-5 mr-2"}):(0,r.jsx)(d,{className:"w-5 h-5 mr-2"}),g?"Create Account":"Login"]})})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsx)("button",{onClick:()=>{p(!g),x(null)},className:"text-sm text-primary hover:underline",children:g?"Already have an account? Login":"First time? Create admin account"})}),(0,r.jsx)("p",{className:"mt-6 text-xs text-muted-foreground text-center",children:g?"You need the admin secret key to create an account.":"Only users with admin privileges can access this dashboard."})]})]})})}var g=s(1301),p=s(9891),b=s(5750),y=s(9057),j=s(6637),v=s(8357);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let N=(0,l.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),w=(0,l.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),_=(0,l.Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),k=(0,l.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function Z(e){let{title:t,value:s,icon:a,description:n}=e;return(0,r.jsxs)(h.Zb,{children:[(0,r.jsxs)(h.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(h.ll,{className:"text-sm font-medium",children:t}),(0,r.jsx)(a,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(h.aY,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s}),n&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:n})]})]})}function C(e){return e<60?"".concat(e.toFixed(1),"s"):e<3600?"".concat((e/60).toFixed(1),"m"):"".concat((e/3600).toFixed(1),"h")}function S(e){return e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toString()}function I(){let{data:e,isLoading:t,error:s}=(0,p.a)({queryKey:["metrics-summary"],queryFn:()=>n.db.getMetricsSummary(),refetchInterval:3e4});if(t)return(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(s)return(0,r.jsx)(h.Zb,{className:"border-destructive",children:(0,r.jsx)(h.aY,{className:"pt-6",children:(0,r.jsxs)("p",{className:"text-destructive",children:["Failed to load metrics:"," ",s instanceof Error?s.message:"Unknown error"]})})});if(!e)return null;let a=e.total_jobs>0?(e.completed_jobs/e.total_jobs*100).toFixed(1):"0";return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Overview of Cloud Vibecoder metrics"})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(Z,{title:"Total Users",value:e.total_users,icon:b.Z,description:"Registered users"}),(0,r.jsx)(Z,{title:"Total Jobs",value:e.total_jobs,icon:y.Z,description:"Coding agent executions"}),(0,r.jsx)(Z,{title:"Plans Generated",value:e.total_plans,icon:j.Z,description:"Implementation plans"}),(0,r.jsx)(Z,{title:"Pull Requests",value:e.total_prs,icon:v.Z,description:"PRs created"})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(Z,{title:"Completed Jobs",value:e.completed_jobs,icon:N,description:"Successfully finished"}),(0,r.jsx)(Z,{title:"Failed Jobs",value:e.failed_jobs,icon:w,description:"Execution failures"}),(0,r.jsx)(Z,{title:"Success Rate",value:"".concat(a,"%"),icon:_,description:"Job completion rate"}),(0,r.jsx)(Z,{title:"Avg Execution Time",value:C(e.avg_execution_time_seconds),icon:k,description:"Per job average"})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(h.Zb,{children:[(0,r.jsx)(h.Ol,{children:(0,r.jsx)(h.ll,{children:"Usage Statistics"})}),(0,r.jsxs)(h.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Total Tokens Used"}),(0,r.jsx)("span",{className:"font-semibold",children:S(e.total_tokens_used)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center py-2 border-b",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Total Execution Time"}),(0,r.jsx)("span",{className:"font-semibold",children:C(e.total_execution_time_seconds)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Total Files Changed"}),(0,r.jsx)("span",{className:"font-semibold",children:S(e.total_files_changed)})]})]})]}),(0,r.jsxs)(h.Zb,{children:[(0,r.jsx)(h.Ol,{children:(0,r.jsx)(h.ll,{children:"Quick Actions"})}),(0,r.jsxs)(h.aY,{className:"space-y-3",children:[(0,r.jsxs)("a",{href:"/users",className:"block p-4 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(b.Z,{className:"w-5 h-5 text-primary mr-3"}),(0,r.jsx)("span",{className:"font-medium",children:"View All Users"})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1 ml-8",children:"Manage users and their permissions"})]}),(0,r.jsxs)("a",{href:"/jobs",className:"block p-4 bg-muted rounded-lg hover:bg-muted/80 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(y.Z,{className:"w-5 h-5 text-primary mr-3"}),(0,r.jsx)("span",{className:"font-medium",children:"View All Jobs"})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-1 ml-8",children:"Monitor job execution and status"})]})]})]})]})]})}function U(){let[e,t]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=await n.auth.getSession();if(null==e?void 0:e.user){t(!0);return}}catch(e){}t(!1)})();let{data:{subscription:e}}=n.auth.onAuthStateChange(async(e,s)=>{"SIGNED_OUT"===e?t(!1):"SIGNED_IN"===e&&s&&t(!0)});return()=>e.unsubscribe()},[]);let s=async()=>{await n.auth.signOut(),t(!1)};return null===e?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?(0,r.jsx)(g.Z,{onLogout:s,children:(0,r.jsx)(I,{})}):(0,r.jsx)(x,{onLogin:()=>{t(!0)}})}},1301:function(e,t,s){"use strict";s.d(t,{Z:function(){return y}});var r=s(7437),a=s(2265),n=s(1396),i=s.n(n),l=s(4033),c=s(5119),o=s(5750),d=s(9057),u=s(6637),m=s(8357),f=s(2549),h=s(5883),x=s(8004),g=s(5754),p=s(1657);let b=[{href:"/",icon:c.Z,label:"Dashboard"},{href:"/users",icon:o.Z,label:"Users"},{href:"/jobs",icon:d.Z,label:"Jobs"},{href:"/plans",icon:u.Z,label:"Plans"},{href:"/prs",icon:m.Z,label:"Pull Requests"}];function y(e){let{children:t,onLogout:s,currentUser:n}=e,[c,o]=(0,a.useState)(!1),d=(0,l.usePathname)();return(0,r.jsxs)("div",{className:"min-h-screen bg-muted/30",children:[c&&(0,r.jsx)("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-20 lg:hidden",onClick:()=>o(!1)}),(0,r.jsxs)("aside",{className:(0,p.cn)("fixed inset-y-0 left-0 z-30 w-64 bg-card border-r transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:fixed",c?"translate-x-0":"-translate-x-full"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-primary",children:"Vibecoder Admin"}),(0,r.jsx)(g.z,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>o(!1),children:(0,r.jsx)(f.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"flex flex-col h-[calc(100%-4rem)]",children:[(0,r.jsx)("nav",{className:"flex-1 mt-6 px-3",children:b.map(e=>{let t=d===e.href||"/"!==e.href&&d.startsWith(e.href);return(0,r.jsxs)(i(),{href:e.href,className:(0,p.cn)("flex items-center px-4 py-3 mb-1 rounded-lg transition-colors",t?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),onClick:()=>o(!1),children:[(0,r.jsx)(e.icon,{className:"h-5 w-5 mr-3"}),e.label]},e.href)})}),(0,r.jsx)("div",{className:"p-4 border-t",children:(0,r.jsxs)(g.z,{variant:"ghost",className:"w-full justify-start",onClick:()=>{s()},children:[(0,r.jsx)(h.Z,{className:"h-5 w-5 mr-3"}),"Logout"]})})]})]}),(0,r.jsxs)("div",{className:"lg:pl-64",children:[(0,r.jsxs)("header",{className:"sticky top-0 z-10 bg-card border-b h-16 flex items-center px-4 lg:px-8",children:[(0,r.jsx)(g.z,{variant:"ghost",size:"icon",className:"lg:hidden mr-4",onClick:()=>o(!0),children:(0,r.jsx)(x.Z,{className:"h-5 w-5"})}),(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Admin Dashboard"})]}),(0,r.jsx)("main",{className:"p-4 lg:p-8",children:t})]})]})}},5754:function(e,t,s){"use strict";s.d(t,{z:function(){return o}});var r=s(7437),a=s(2265),n=s(4949),i=s(6061),l=s(1657);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(c({variant:a,size:i,className:s})),ref:t,...d})});o.displayName="Button"},7815:function(e,t,s){"use strict";s.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var r=s(7437),a=s(2265),n=s(1657);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},5922:function(e,t,s){"use strict";s.d(t,{auth:function(){return a},db:function(){return n}});let r=(0,s(921).eI)("https://fwbmyfpfckvjomzijkby.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ3Ym15ZnBmY2t2am9temlqa2J5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MDY3MTksImV4cCI6MjA3OTk4MjcxOX0.XC05FJy78pQ9HluOXLm4fZrA3zF8sxDQ5uY-0-bUXPM"),a={async signUp(e,t){let{data:s,error:a}=await r.auth.signUp({email:e,password:t});if(a)throw a;return s},async signIn(e,t){let{data:s,error:a}=await r.auth.signInWithPassword({email:e,password:t});if(a)throw a;return s},async signOut(){let{error:e}=await r.auth.signOut();if(e)throw e},async getSession(){let{data:e,error:t}=await r.auth.getSession();if(t)throw t;return e.session},async getUser(){let{data:e,error:t}=await r.auth.getUser();if(t)throw t;return e.user},onAuthStateChange:e=>r.auth.onAuthStateChange(e)},n={async getUsers(){let{data:e,error:t}=await r.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async getUser(e){let{data:t,error:s}=await r.from("users").select("*").eq("id",e).single();if(s)throw s;return t},async getUserByGithubId(e){let{data:t,error:s}=await r.from("users").select("*").eq("github_id",e).single();if(s&&"PGRST116"!==s.code)throw s;return t},async getUserByGithubLogin(e){let{data:t,error:s}=await r.from("users").select("*").eq("github_login",e).single();if(s&&"PGRST116"!==s.code)throw s;return t},async getUserByEmail(e){let{data:t,error:s}=await r.from("users").select("*").eq("github_email",e).single();if(s&&"PGRST116"!==s.code)throw s;return t},async setUserAdmin(e,t){let{data:s,error:a}=await r.from("users").update({is_admin:t}).eq("id",e).select().single();if(a)throw a;return s},async createUser(e){var t;let{data:s,error:a}=await r.from("users").insert({...e,is_admin:null!==(t=e.is_admin)&&void 0!==t&&t}).select().single();if(a)throw a;return s},async getJobs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,{data:t,error:s}=await r.from("job_records").select("*").order("created_at",{ascending:!1}).limit(e);if(s)throw s;return t},async getJobsByUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,{data:s,error:a}=await r.from("job_records").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(a)throw a;return s},async getPlans(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,{data:t,error:s}=await r.from("plan_records").select("*").order("created_at",{ascending:!1}).limit(e);if(s)throw s;return t},async getPlansByUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,{data:s,error:a}=await r.from("plan_records").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(a)throw a;return s},async getPRs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,{data:t,error:s}=await r.from("pr_records").select("*").order("created_at",{ascending:!1}).limit(e);if(s)throw s;return t},async getPRsByUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,{data:s,error:a}=await r.from("pr_records").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(a)throw a;return s},async getMetricsSummary(){let[e,t,s,a]=await Promise.all([r.from("users").select("id",{count:"exact"}),r.from("job_records").select("*"),r.from("plan_records").select("id",{count:"exact"}),r.from("pr_records").select("id",{count:"exact"})]),n=t.data||[],i=n.filter(e=>"completed"===e.status),l=n.filter(e=>"failed"===e.status),c=n.reduce((e,t)=>e+(t.tokens_used||0),0),o=n.reduce((e,t)=>e+(t.execution_time_seconds||0),0),d=n.reduce((e,t)=>e+(t.files_changed||0),0);return{total_users:e.count||0,total_jobs:n.length,total_plans:s.count||0,total_prs:a.count||0,completed_jobs:i.length,failed_jobs:l.length,total_tokens_used:c,total_execution_time_seconds:o,total_files_changed:d,avg_execution_time_seconds:n.length>0?o/n.length:0}},async getUserMetrics(e){let[t,s,a]=await Promise.all([r.from("job_records").select("*").eq("user_id",e),r.from("plan_records").select("id",{count:"exact"}).eq("user_id",e),r.from("pr_records").select("id",{count:"exact"}).eq("user_id",e)]),n=t.data||[],i=n.filter(e=>"completed"===e.status),l=n.filter(e=>"failed"===e.status),c=n.reduce((e,t)=>e+(t.tokens_used||0),0),o=n.reduce((e,t)=>e+(t.execution_time_seconds||0),0);return{total_jobs:n.length,completed_jobs:i.length,failed_jobs:l.length,total_plans:s.count||0,total_prs:a.count||0,total_tokens_used:c,total_execution_time_seconds:o}}}},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(7042),a=s(4769);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[417,252,971,938,744],function(){return e(e.s=1915)}),_N_E=e.O()}]);