(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[228],{9948:function(e,t,r){Promise.resolve().then(r.bind(r,511))},511:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var s=r(7437),n=r(2265),a=r(9891);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r(2898).Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);var l=r(4301),o=r(5922),c=r(7815),d=r(1478),u=r(1301);function f(){let[e,t]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let{auth:e}=await Promise.resolve().then(r.bind(r,5922)),s=await e.getSession();if(null==s?void 0:s.user){t(!0);return}}catch(e){}t(!1)})()},[]);let{data:f,isLoading:m,error:h}=(0,a.a)({queryKey:["prs"],queryFn:()=>o.db.getPRs(),enabled:!0===e});if(null===e)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(!e)return window.location.href="/",null;let x=e=>{switch(e){case"open":return"success";case"merged":return"default";default:return"secondary"}};return(0,s.jsx)(u.Z,{onLogout:()=>t(!1),children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Pull Requests"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"All created pull requests"})]}),m&&(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),h&&(0,s.jsx)(c.Zb,{className:"border-destructive",children:(0,s.jsx)(c.aY,{className:"pt-6",children:(0,s.jsx)("p",{className:"text-destructive",children:"Failed to load pull requests"})})}),f&&(0,s.jsxs)(c.Zb,{children:[(0,s.jsx)(c.Ol,{children:(0,s.jsxs)(c.ll,{children:["All Pull Requests (",f.length,")"]})}),(0,s.jsx)(c.aY,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"PR"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Repository"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Title"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Branch"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"State"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Created"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-medium text-muted-foreground",children:"Link"})]})}),(0,s.jsx)("tbody",{children:f.map(e=>(0,s.jsxs)("tr",{className:"border-b hover:bg-muted/50",children:[(0,s.jsxs)("td",{className:"py-3 px-4 font-medium",children:["#",e.pr_number]}),(0,s.jsxs)("td",{className:"py-3 px-4",children:[e.repo_owner,"/",e.repo_name]}),(0,s.jsx)("td",{className:"py-3 px-4 max-w-xs truncate",children:e.title}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:[e.head_branch," â†’ ",e.base_branch]})}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)(d.C,{variant:x(e.state),children:e.state})}),(0,s.jsx)("td",{className:"py-3 px-4 text-muted-foreground",children:(0,l.Z)(new Date(e.created_at),"MMM d, HH:mm")}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)("a",{href:e.html_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline inline-flex items-center gap-1",children:["View ",(0,s.jsx)(i,{className:"w-3 h-3"})]})})]},e.id))})]})})})]})]})})}},1301:function(e,t,r){"use strict";r.d(t,{Z:function(){return y}});var s=r(7437),n=r(2265),a=r(1396),i=r.n(a),l=r(4033),o=r(5119),c=r(5750),d=r(9057),u=r(6637),f=r(8357),m=r(2549),h=r(5883),x=r(8004),g=r(5754),p=r(1657);let b=[{href:"/",icon:o.Z,label:"Dashboard"},{href:"/users",icon:c.Z,label:"Users"},{href:"/jobs",icon:d.Z,label:"Jobs"},{href:"/plans",icon:u.Z,label:"Plans"},{href:"/prs",icon:f.Z,label:"Pull Requests"}];function y(e){let{children:t,onLogout:r,currentUser:a}=e,[o,c]=(0,n.useState)(!1),d=(0,l.usePathname)();return(0,s.jsxs)("div",{className:"min-h-screen bg-muted/30",children:[o&&(0,s.jsx)("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-20 lg:hidden",onClick:()=>c(!1)}),(0,s.jsxs)("aside",{className:(0,p.cn)("fixed inset-y-0 left-0 z-30 w-64 bg-card border-r transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:fixed",o?"translate-x-0":"-translate-x-full"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16 px-6 border-b",children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-primary",children:"Vibecoder Admin"}),(0,s.jsx)(g.z,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>c(!1),children:(0,s.jsx)(m.Z,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"flex flex-col h-[calc(100%-4rem)]",children:[(0,s.jsx)("nav",{className:"flex-1 mt-6 px-3",children:b.map(e=>{let t=d===e.href||"/"!==e.href&&d.startsWith(e.href);return(0,s.jsxs)(i(),{href:e.href,className:(0,p.cn)("flex items-center px-4 py-3 mb-1 rounded-lg transition-colors",t?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),onClick:()=>c(!1),children:[(0,s.jsx)(e.icon,{className:"h-5 w-5 mr-3"}),e.label]},e.href)})}),(0,s.jsx)("div",{className:"p-4 border-t",children:(0,s.jsxs)(g.z,{variant:"ghost",className:"w-full justify-start",onClick:()=>{r()},children:[(0,s.jsx)(h.Z,{className:"h-5 w-5 mr-3"}),"Logout"]})})]})]}),(0,s.jsxs)("div",{className:"lg:pl-64",children:[(0,s.jsxs)("header",{className:"sticky top-0 z-10 bg-card border-b h-16 flex items-center px-4 lg:px-8",children:[(0,s.jsx)(g.z,{variant:"ghost",size:"icon",className:"lg:hidden mr-4",onClick:()=>c(!0),children:(0,s.jsx)(x.Z,{className:"h-5 w-5"})}),(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Admin Dashboard"})]}),(0,s.jsx)("main",{className:"p-4 lg:p-8",children:t})]})]})}},1478:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var s=r(7437);r(2265);var n=r(6061),a=r(1657);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",warning:"border-transparent bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...n})}},5754:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var s=r(7437),n=r(2265),a=r(4949),i=r(6061),l=r(1657);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},7815:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var s=r(7437),n=r(2265),a=r(1657);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},5922:function(e,t,r){"use strict";r.d(t,{auth:function(){return n},db:function(){return a}});let s=(0,r(921).eI)("https://fwbmyfpfckvjomzijkby.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ3Ym15ZnBmY2t2am9temlqa2J5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MDY3MTksImV4cCI6MjA3OTk4MjcxOX0.XC05FJy78pQ9HluOXLm4fZrA3zF8sxDQ5uY-0-bUXPM"),n={async signUp(e,t){let{data:r,error:n}=await s.auth.signUp({email:e,password:t});if(n)throw n;return r},async signIn(e,t){let{data:r,error:n}=await s.auth.signInWithPassword({email:e,password:t});if(n)throw n;return r},async signOut(){let{error:e}=await s.auth.signOut();if(e)throw e},async getSession(){let{data:e,error:t}=await s.auth.getSession();if(t)throw t;return e.session},async getUser(){let{data:e,error:t}=await s.auth.getUser();if(t)throw t;return e.user},onAuthStateChange:e=>s.auth.onAuthStateChange(e)},a={async getUsers(){let{data:e,error:t}=await s.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async getUser(e){let{data:t,error:r}=await s.from("users").select("*").eq("id",e).single();if(r)throw r;return t},async getUserByGithubId(e){let{data:t,error:r}=await s.from("users").select("*").eq("github_id",e).single();if(r&&"PGRST116"!==r.code)throw r;return t},async getUserByGithubLogin(e){let{data:t,error:r}=await s.from("users").select("*").eq("github_login",e).single();if(r&&"PGRST116"!==r.code)throw r;return t},async getUserByEmail(e){let{data:t,error:r}=await s.from("users").select("*").eq("github_email",e).single();if(r&&"PGRST116"!==r.code)throw r;return t},async setUserAdmin(e,t){let{data:r,error:n}=await s.from("users").update({is_admin:t}).eq("id",e).select().single();if(n)throw n;return r},async createUser(e){var t;let{data:r,error:n}=await s.from("users").insert({...e,is_admin:null!==(t=e.is_admin)&&void 0!==t&&t}).select().single();if(n)throw n;return r},async getJobs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,{data:t,error:r}=await s.from("job_records").select("*").order("created_at",{ascending:!1}).limit(e);if(r)throw r;return t},async getJobsByUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,{data:r,error:n}=await s.from("job_records").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r},async getPlans(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,{data:t,error:r}=await s.from("plan_records").select("*").order("created_at",{ascending:!1}).limit(e);if(r)throw r;return t},async getPlansByUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,{data:r,error:n}=await s.from("plan_records").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r},async getPRs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,{data:t,error:r}=await s.from("pr_records").select("*").order("created_at",{ascending:!1}).limit(e);if(r)throw r;return t},async getPRsByUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,{data:r,error:n}=await s.from("pr_records").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r},async getMetricsSummary(){let[e,t,r,n]=await Promise.all([s.from("users").select("id",{count:"exact"}),s.from("job_records").select("*"),s.from("plan_records").select("id",{count:"exact"}),s.from("pr_records").select("id",{count:"exact"})]),a=t.data||[],i=a.filter(e=>"completed"===e.status),l=a.filter(e=>"failed"===e.status),o=a.reduce((e,t)=>e+(t.tokens_used||0),0),c=a.reduce((e,t)=>e+(t.execution_time_seconds||0),0),d=a.reduce((e,t)=>e+(t.files_changed||0),0);return{total_users:e.count||0,total_jobs:a.length,total_plans:r.count||0,total_prs:n.count||0,completed_jobs:i.length,failed_jobs:l.length,total_tokens_used:o,total_execution_time_seconds:c,total_files_changed:d,avg_execution_time_seconds:a.length>0?c/a.length:0}},async getUserMetrics(e){let[t,r,n]=await Promise.all([s.from("job_records").select("*").eq("user_id",e),s.from("plan_records").select("id",{count:"exact"}).eq("user_id",e),s.from("pr_records").select("id",{count:"exact"}).eq("user_id",e)]),a=t.data||[],i=a.filter(e=>"completed"===e.status),l=a.filter(e=>"failed"===e.status),o=a.reduce((e,t)=>e+(t.tokens_used||0),0),c=a.reduce((e,t)=>e+(t.execution_time_seconds||0),0);return{total_jobs:a.length,completed_jobs:i.length,failed_jobs:l.length,total_plans:r.count||0,total_prs:n.count||0,total_tokens_used:o,total_execution_time_seconds:c}}}},1657:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(7042),n=r(4769);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}}},function(e){e.O(0,[417,252,301,971,938,744],function(){return e(e.s=9948)}),_N_E=e.O()}]);